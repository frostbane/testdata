FROM opensuse/leap:latest

LABEL Remarks="OpenSuse LEAP"

WORKDIR /root/project

RUN echo -e "root\nroot" | passwd root &&    \
    mkdir /home/admin &&                     \
    useradd -d /home/admin -u 1000 admin &&  \
    groupadd -g 1000 admin &&                \
    usermod -aG admin admin &&               \
    usermod -s /bin/bash admin &&            \
    chown admin:admin /home/admin

RUN zypper update -y &&                      \
    zypper install -y                        \
        net-tools                            \
        net-tools-deprecated                 \
        xclock                               \
        xedit                                \
        xcalc                                \
        xeyes                                \
        xv                                   \
        iputils                              \
        gcc                                  \
        gdb                                  \
        tar                                  \
        curl                                 \
        gzip                                 \
        which                                \
        mc                                   \
        xz                                   \
        make                                 \
        axel                                 \
        sudo                                 \
        tmux                                 \
        htop                                 \
        vim                     &&           \
    zypper install -yt pattern x11

#RUN curl -sSL https://get.haskellstack.org/ | bash

RUN touch /etc/sudoers.d/admin && \
    echo "admin ALL=(ALL) NOPASSWD:ALL" > /etc/sudoers.d/admin
RUN dbus-uuidgen >/etc/machine-id

RUN zypper install -y                       \
  gmp-devel                                 \
  pcre-devel                                \
  zlib-devel                                \
  libbz2-devel                              \
  ncurses5-devel

#USER admin

#ENTRYPOINT /bin/bash
#CMD /bin/bash
